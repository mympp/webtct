/* ========================================================================
 * tc.common.responsive.js v0.0.1
 * ======================================================================== */
var sUserAgent = navigator.userAgent.toLowerCase();
var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
var bIsMidp = sUserAgent.match(/midp/i) == "midp";
var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
var bIsAndroid = sUserAgent.match(/android/i) == "android";
var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
//通过userAgent判断
if (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {
	// flexible.js
	(function(win,lib){var doc=win.document;var docEl=doc.documentElement;var metaEl=doc.querySelector('meta[name="viewport"]');var flexibleEl=doc.querySelector('meta[name="flexible"]');var dpr=0;var scale=0;var tid;var flexible=lib.flexible||(lib.flexible={});if(metaEl){console.warn("将根据已有的meta标签来设置缩放比例");var match=metaEl.getAttribute("content").match(/initial\-scale=([\d\.]+)/);if(match){scale=parseFloat(match[1]);dpr=parseInt(1/scale)}}else{if(flexibleEl){var content=flexibleEl.getAttribute("content");if(content){var initialDpr=content.match(/initial\-dpr=([\d\.]+)/);var maximumDpr=content.match(/maximum\-dpr=([\d\.]+)/);if(initialDpr){dpr=parseFloat(initialDpr[1]);scale=parseFloat((1/dpr).toFixed(2))}if(maximumDpr){dpr=parseFloat(maximumDpr[1]);scale=parseFloat((1/dpr).toFixed(2))}}}}if(!dpr&&!scale){var isAndroid=win.navigator.appVersion.match(/android/gi);var isIPhone=win.navigator.appVersion.match(/iphone/gi);var devicePixelRatio=win.devicePixelRatio;if(isIPhone){if(devicePixelRatio>=3&&(!dpr||dpr>=3)){dpr=3}else{if(devicePixelRatio>=2&&(!dpr||dpr>=2)){dpr=2}else{dpr=1}}}else{dpr=1}scale=1/dpr}docEl.setAttribute("data-dpr",dpr);if(!metaEl){metaEl=doc.createElement("meta");metaEl.setAttribute("name","viewport");metaEl.setAttribute("content","initial-scale="+scale+", maximum-scale="+scale+", minimum-scale="+scale+", user-scalable=no");if(docEl.firstElementChild){docEl.firstElementChild.appendChild(metaEl)}else{var wrap=doc.createElement("div");wrap.appendChild(metaEl);doc.write(wrap.innerHTML)}}function refreshRem(){var width=docEl.getBoundingClientRect().width;if(width/dpr>540){width=540*dpr}var rem=width/10;docEl.style.fontSize=rem+"px";flexible.rem=win.rem=rem}win.addEventListener("resize",function(){clearTimeout(tid);tid=setTimeout(refreshRem,300)},false);win.addEventListener("pageshow",function(e){if(e.persisted){clearTimeout(tid);tid=setTimeout(refreshRem,300)}},false);if(doc.readyState==="complete"){doc.body.style.fontSize=12*dpr+"px"}else{doc.addEventListener("DOMContentLoaded",function(e){doc.body.style.fontSize=12*dpr+"px"},false)}refreshRem();flexible.dpr=win.dpr=dpr;flexible.refreshRem=refreshRem;flexible.rem2px=function(d){var val=parseFloat(d)*this.rem;if(typeof d==="string"&&d.match(/rem$/)){val+="px"}return val};flexible.px2rem=function(d){var val=parseFloat(d)/this.rem;if(typeof d==="string"&&d.match(/px$/)){val+="rem"}return val}})(window,window["lib"]||(window["lib"]={}));
	//移动端执行
	$(function(){
		//添加遮罩层
		$("body").append('<div id="tcMobileCover"></div>');
		$("#tcMobileCover").css({width:($(window).width())+'px',height:$(window).height(),position:'fixed',top:'0px',left:'0px',zIndex:'999999999',display:'none'});
		//添加导航按钮
		$(".topbg").append('<a href="javascript:;" id="tcMobileMenu" class="tc-mobile-menu"></a>');
		//展开&隐藏侧边导航
		$(document)[0].onclick = function(e){
			var e = e || window.event;
			var target = e.target || e.srcElement;
			if(target.id == "tcMobileMenu"){
				$("#tcMobileCover").show();
				$("#tcMobileMenu").addClass("act");
				$("body").addClass("wrap-offset");
			}else{
				$("#tcMobileCover").hide();
				$("#tcMobileMenu").removeClass("act");
				$("body").removeClass("wrap-offset");
			}
		};
	});
} else { 
	
}
//side.tool.js
$(function() {
	$(window).scroll(function() {
		if ($(window).scrollTop() > 800) {
			$(".side-tool .to-top").fadeIn();
		} else {
			$(".side-tool .to-top").fadeOut();
		}
	});
	$(".side-tool .to-top").click(function(){
		$('body,html').animate({
			scrollTop: 0
		},500);
		return false;
	});
});
// 弹出对话框
function dialog(){
	$(".modal").removeClass("hidden");
	qrcodeAPI();
}
// 关闭弹出
function closeDialog(){
	$(".modal").addClass("hidden");
}
// 二维码获取（联图API）
function qrcodeAPI(){
	var localUrl = location.href;
	var baseSrc = "http://qr.liantu.com/api.php?text=";
	$(".qrcodeImg").attr("src",baseSrc+localUrl);
}
// 导航栏当前状态显示
navCurrent();
function navCurrent(){
	var url = location.href;
	var ele = location.href.split("about/")[1].split(".html")[0];
	$(".header-nav li a").each(function(){
		var cur  =  $(this).attr("href").split(".html")[0].split("./")[1];
		if( cur == ele){
			$(this).addClass("current");
		}
	});
}

function showFullTel(ele){
    $(ele).prev().html($(ele).prev().attr("data-num").replace(/,/g,""));
    $(ele).hide();
}


var _hmt = _hmt || [];
(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?2b363fb3d03ff9991c4971afddf8731d";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
})();
