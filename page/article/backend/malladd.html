<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/common.css" rel="stylesheet" />
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://vuejs.org/js/vue.js"></script>
    <style>
        #mallAdd{margin:0px auto;width:980px;}
    </style>
</head>
<body>
<div id="app">
    <div id="navigation" v-html="navigation">{{navigaion}}</div>

    <div id="mallAdd">
        <span class="label label-primary font-size22">修改产品</span>
        <br/><br/>
        <form class="form-horizontal" role="form">
            <div class="form-group">
                <label class="col-sm-2 control-label">标题</label>
                <div class="col-sm-10">
                    <a href="#" title="查看"><p class="form-control-static">投影式红外血管成像仪</p></a>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">标签</label>
                <div class="col-sm-10">
                    <input class="form-control" type="text" value="投影|红外|成像仪">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">已关联文章</label>
                <div class="col-sm-10">
                    <b class="form-control-static">2</b>
                </div>
            </div>

            <div style="margin:20px auto;width:50px;">
                <input type="submit" class="btn btn-primary" value="修改">
            </div>
        </form>
        <button class="btn btn-primary" data-toggle="modal" data-target="#articleRela">修改关联文章</button>
    </div>

    <!-- 关联文章 -->
    <div class="modal fade" id="articleRela" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">投影式红外血管成像仪 -- 关联文章</h4>
                </div>
                <div class="modal-body">
                    <form class="form-horizontal" role="form">
                        <table id="tableList" class="table table-bordered">
                            <caption>已关联文章</caption>
                            <thead>
                            <tr>
                                <th>标题</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody >
                            <tr v-for="item in selectedArticle">
                                <td>{{item.title}}</td>
                                <td>
                                    <a href="#" title="查看"><span class="glyphicon glyphicon-eye-open"></span></a>&nbsp;
                                    <a href="javascript:void(0);" @click="deleteArticle(item.id)" title="移去"><span class="glyphicon glyphicon-remove-circle"></span></a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </form>

                    <form class="form-horizontal" role="form">
                        <table class="table table-bordered">
                            <caption>关联文章</caption>
                            <thead>
                            <tr>
                                <td><input type="text" name="" class="form-control" value="查找内容" /></td>
                                <td><button type="button" class="btn btn-primary" @click="pushSearchArticles">查找</button></td>
                            </tr>
                            </thead>
                            <tbody v-if="searchArticle.length">
                            <tr >
                                <th>标题</th>
                                <th>操作</th>
                            </tr>
                            <tr v-for="item in searchArticle">
                                <td>{{item.title}}</td>
                                <td>
                                    <a href="#" title="查看"><span class="glyphicon glyphicon-eye-open"></span></a>&nbsp;
                                    <a href="javascript:void(0);" @click="addArticle(item.id)" title="添加"><span class="glyphicon glyphicon-plus-sign"></span></a>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">提交更改</button>
                </div>
            </div>
        </div>

        <!-- 关联文章 end -->

    </div>

</div>
</body>
<script>
    var articleRela = new Vue({
        el:'#articleRela',
        data:{
            selectedArticle:[
                {id:1,title:'医用下肢垫大腿抬高护理垫 腿部抬高垫'},
                {id:2,title:'科宝全自动尿液分析仪XS型'},
            ],
            searchArticle:[],
        },
        methods:{
            deleteArticle : function(id){
                if(confirm('确定删除？')){
                    for(item in articleRela.selectedArticle){
                        if(articleRela.selectedArticle[item]['id'] == id){
                            articleRela.selectedArticle.splice(item,1);
                            break;
                        }
                    }
                }
            },
            pushSearchArticles :function(element){
                articleRela.searchArticle = [
                    {id:4,title:'投影式红外血管成像仪'},
                    {id:5,title:'脑电（肌电）导联线 鳄鱼夹电极'},
                    {id:6,title:'瑞安森 一次性医用防护口罩'},
                ];
            },
            addArticle :function(id){
                if(confirm('确定添加？')){
                    for( item in articleRela.searchArticle){
                        if(articleRela.searchArticle[item]['id'] == id){
                            articleRela.selectedArticle.push(articleRela.searchArticle[item]);
                            articleRela.searchArticle.splice(item,1);
                            break;
                        }
                    }
                }
            },
        },
    });
</script>
<script src="./js/common.js"></script>
</html>