<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/common.css" rel="stylesheet" />
    <link href="./css/bootstrap-datetimepicker.min.css" />
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://vuejs.org/js/vue.js"></script>
    <script src="http://momentjs.cn/downloads/moment.min.js"></script>
    <script src="./js/bootstrap-datetimepicker.js"></script>
    <script src="./js/ueditor/ueditor.config.js"></script>
    <script src="./js/ueditor/ueditor.all.min.js"></script>

    <style>
        #articleContent{width:860px;float:left;margin:0px 20px;border-right:1px solid #ccc;padding:0px 15px;}
        #articleContent form{border-top: 1px solid #ccc; padding-top: 15px;}
        #articleContent form select {width:136px;float:left;}
        #categoryChild select{margin-left:15px;}

        #mallRela{float:left;min-width:400px;}
    </style>
</head>
<body>
<div id="app">
    <div id="navigation" v-html="navigation">{{navigaion}}</div>

    <div id="articleContent">
        <span class="label label-primary font-size22">文章内容</span>
        <br/><br/>
        <form class="form-horizontal" role="form">
            <div class="form-group">
                <label class="col-sm-2 control-label">标题</label>
                <div class="col-sm-10">
                    <input class="form-control" id="title" type="text" value="请填写文章标题...">
                </div>
            </div>

            <div id="articleCategory" class="form-group field-parentidDownList">
                <label class="col-sm-2 control-label">栏目</label>
                <div class="col-sm-10">
                    <select class="form-control" @change="selectCategory">
                        <option value="">请选择栏目</option>
                        <option value="栏目1">栏目1</option>
                        <option value="栏目2">栏目2</option>
                        <option value="栏目3">栏目3</option>
                    </select>

                    <div id="categoryChild" v-if="childOptions.length">
                        <select class="form-control">
                            <option value="" v-for="item in childOptions">{{item.value}}</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">摘要</label>
                <div class="col-sm-10">
                    <textarea class="form-control" ></textarea>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">关键词</label>
                <div class="col-sm-10">
                    <input class="form-control" type="text" value="">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">发布时间</label>
                <div class="col-sm-10">
                    <div class="input-group" id="datetimepicker">
                        <input type="text" class="form-control">
                        <span class="input-group-addon">选择时间</span>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">作者</label>
                <div class="col-sm-10">
                    <input class="form-control" type="text" value="">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">来源</label>
                <div class="col-sm-10">
                    <input class="form-control" type="text" value="">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">标签</label>
                <div class="col-sm-10">
                    <input class="form-control" type="text" value="">
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-2 control-label">内容</label>
                <div class="col-sm-10">
                    <script id="container" name="content" type="text/plain"></script>
                </div>
            </div>

        </form>
    </div>

    <div id="mallRela">
        <span class="label label-primary font-size22">关联产品</span>
        <br/><br/>

        <form class="form-horizontal" role="form">
            <table id="tableList" class="table table-bordered">
                <caption>已关联产品</caption>
                <thead>
                    <tr>
                        <th>标题</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody >
                    <tr v-for="item in selectedMall">
                        <td>{{item.title}}</td>
                        <td>
                            <a href="#" title="查看"><span class="glyphicon glyphicon-eye-open"></span></a>&nbsp;
                            <a href="javascript:void(0);" @click="deleteMall(item.id)" title="移去"><span class="glyphicon glyphicon-remove-circle"></span></a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </form>

        <br/>

        <form class="form-horizontal" role="form">
            <table class="table table-bordered">
                <caption>关联产品</caption>
                <thead>
                <tr>
                    <td><input type="text" name="" class="form-control" value="查找内容" /></td>
                    <td><button type="button" class="btn btn-primary" @click="pushSearchMall">查找</button></td>
                </tr>
                </thead>
                <tbody v-if="searchMall.length">
                <tr >
                    <th>标题</th>
                    <th>操作</th>
                </tr>
                <tr v-for="item in searchMall">
                    <td>{{item.title}}</td>
                    <td>
                        <a href="#" title="查看"><span class="glyphicon glyphicon-eye-open"></span></a>&nbsp;
                        <a href="javascript:void(0);" @click="addMall(item.id)" title="添加"><span class="glyphicon glyphicon-plus-sign"></span></a>
                    </td>
                </tr>
                </tbody>
            </table>
        </form>

    </div>

    <div style="clear:both;"></div>
    <div style="margin:20px auto;width:50px;">
        <button type="button" class="btn btn-primary">提交</button>
    </div>
</div>

</body>
<script>
    var ue = UE.getEditor('container',{
        initialFrameHeight:400,
    });

    $('#datetimepicker').datetimepicker({});

    var articleCategory = new Vue({
        el : '#articleCategory',
        data:{
            childOptions : [],
        },
        methods:{
            selectCategory:function(element){
                articleCategory.childOptions = [
                    {value:'子栏目1'},
                    {value:'子栏目2'},
                ];
            },
        },
    });

    var mallRela = new Vue({
        el:'#mallRela',
        data:{
            selectedMall:[
                {id:1,title:'医用下肢垫大腿抬高护理垫 腿部抬高垫'},
                {id:2,title:'科宝全自动尿液分析仪XS型'},
                {id:3,title:'便携式超声雾化器'},
            ],
            searchMall:[],
        },
        methods:{
            deleteMall : function(id){
                if(confirm('确定删除？')){
                    for(item in mallRela.selectedMall){
                        if(mallRela.selectedMall[item]['id'] == id){
                            mallRela.selectedMall.splice(item,1);
                            break;
                        }
                    }
                }
            },
            pushSearchMall :function(element){
                mallRela.searchMall = [
                    {id:4,title:'投影式红外血管成像仪'},
                    {id:5,title:'脑电（肌电）导联线 鳄鱼夹电极'},
                    {id:6,title:'瑞安森 一次性医用防护口罩'},
                ];
            },
            addMall :function(id){
                if(confirm('确定添加？')){
                    for( item in mallRela.searchMall){
                        if(mallRela.searchMall[item]['id'] == id){
                            mallRela.selectedMall.push(mallRela.searchMall[item]);
                            mallRela.searchMall.splice(item,1);
                            break;
                        }
                    }
                }
            },
        },
    });

</script>
<script src="./js/common.js"></script>
</html>