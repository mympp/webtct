$(function(){$(".minus").click(function(){var a=$(this).parent().find(".num");a.text(parseInt(a.text())-1);if(a.text()<=1){a.text(1)}b()});$(".plus").click(function(){var a=$(this).parent().find(".num");a.text(parseInt(a.text())+1);if(a.text()<=1){a.text(1)}b()});$(".goodsCheck").click(function(){var a=$(this).closest(".shop-group-item").find(".goodsCheck");var e=$(this).closest(".shop-group-item").find(".goodsCheck:checked");var f=$(this).closest(".shop-group-item").find(".shopCheck");if(a.length==e.length){f.prop("checked",true);if($(".shopCheck").length==$(".shopCheck:checked").length){$("#AllCheck").prop("checked",true);b()}else{$("#AllCheck").prop("checked",false);b()}}else{f.prop("checked",false);$("#AllCheck").prop("checked",false);b()}});$(".shopCheck").click(function(){if($(this).prop("checked")==true){$(this).parents(".shop-group-item").find(".goods-check").prop("checked",true);if($(".shopCheck").length==$(".shopCheck:checked").length){$("#AllCheck").prop("checked",true);b()}else{$("#AllCheck").prop("checked",false);b()}}else{$(this).parents(".shop-group-item").find(".goods-check").prop("checked",false);$("#AllCheck").prop("checked",false);b()}});$("#AllCheck").click(function(){if($(this).prop("checked")==true){$(".goods-check").prop("checked",true);b()}else{$(".goods-check").prop("checked",false);b()}$(".shopCheck").change()});function b(){var a=0;$(".shop-group-item").each(function(){var f=0;$(this).find(".goodsCheck").each(function(){if($(this).is(":checked")){var h=parseInt($(this).parents(".shop-info").find(".num").text());var c=parseFloat($(this).parents(".shop-info").find(".price").text());var d=c*h;f+=d}$(this).closest(".shop-group-item").find(".ShopTotal").text(f.toFixed(2))});var e=parseFloat($(this).find(".ShopTotal").text());a+=e});$("#AllTotal").text(a.toFixed(2))}$(document).on("click",".edit-shop-btn",function(){var a=$(this).parent().parent().parent();$(this).hide();a.find(".finish-edit-shop-btn").show();a.find(".shop-remove-btn").show();a.find(".shop-info-text").addClass("shop-info-text-edit")});$(document).on("click",".finish-edit-shop-btn",function(){var a=$(this).parent().parent().parent();$(this).hide();a.find(".edit-shop-btn").show();a.find(".shop-remove-btn").hide();a.find(".shop-info-text").removeClass("shop-info-text-edit")});$(document).on("click",".shop-remove-btn",function(){var d=$(this);var a=false;if(d.parent().parent().find(".shop-info").length==1){a=true}$.confirm("确定要删除该商品吗？",function(){if(a){d.parent().parent().remove()}d.parent().remove();b()},function(){})})});