$(function(){$(".minus").click(function(){var b=$(this).parent().find(".num");b.text(parseInt(b.text())-1);if(b.text()<=1){b.text(1)}a()});$(".plus").click(function(){var b=$(this).parent().find(".num");b.text(parseInt(b.text())+1);if(b.text()<=1){b.text(1)}a()});$(".goodsCheck").click(function(){var b=$(this).closest(".shop-group-item").find(".goodsCheck");var d=$(this).closest(".shop-group-item").find(".goodsCheck:checked");var c=$(this).closest(".shop-group-item").find(".shopCheck");if(b.length==d.length){c.prop("checked",true);if($(".shopCheck").length==$(".shopCheck:checked").length){$("#AllCheck").prop("checked",true);a()}else{$("#AllCheck").prop("checked",false);a()}}else{c.prop("checked",false);$("#AllCheck").prop("checked",false);a()}});$(".shopCheck").click(function(){if($(this).prop("checked")==true){$(this).parents(".shop-group-item").find(".goods-check").prop("checked",true);if($(".shopCheck").length==$(".shopCheck:checked").length){$("#AllCheck").prop("checked",true);a()}else{$("#AllCheck").prop("checked",false);a()}}else{$(this).parents(".shop-group-item").find(".goods-check").prop("checked",false);$("#AllCheck").prop("checked",false);a()}});$("#AllCheck").click(function(){if($(this).prop("checked")==true){$(".goods-check").prop("checked",true);a()}else{$(".goods-check").prop("checked",false);a()}$(".shopCheck").change()});function a(){var b=0;$(".shop-group-item").each(function(){var c=0;$(this).find(".goodsCheck").each(function(){if($(this).is(":checked")){var e=parseInt($(this).parents(".shop-info").find(".num").text());var g=parseFloat($(this).parents(".shop-info").find(".price").text());var f=g*e;c+=f}$(this).closest(".shop-group-item").find(".ShopTotal").text(c.toFixed(2))});var d=parseFloat($(this).find(".ShopTotal").text());b+=d});$("#AllTotal").text(b.toFixed(2))}$(document).on("click",".edit-shop-btn",function(){var b=$(this).parent().parent().parent();$(this).hide();b.find(".finish-edit-shop-btn").show();b.find(".shop-remove-btn").show();b.find(".shop-info-text").addClass("shop-info-text-edit")});$(document).on("click",".finish-edit-shop-btn",function(){var b=$(this).parent().parent().parent();$(this).hide();b.find(".edit-shop-btn").show();b.find(".shop-remove-btn").hide();b.find(".shop-info-text").removeClass("shop-info-text-edit")});$(document).on("click",".shop-remove-btn",function(){var c=$(this);var b=false;if(c.parent().parent().find(".shop-info").length==1){b=true}$.confirm("确定要删除该商品吗？",function(){if(b){c.parent().parent().remove()}c.parent().remove();a()},function(){})})});