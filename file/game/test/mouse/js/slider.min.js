(function(a){a.extend(a.fn,{slider:function(b){this.each(function(){var f=a(this);var e={wrap:f.find(".slider-list"),item:f.find(".slider-item"),firstItem:f.find(".slider-item").first(),lastItem:f.find(".slider-item").last(),pagelist:null,pageItem:null};var d={len:e.item.length,width:e.wrap.width(),startX:0,startY:0,index:b?(b.infinite?1:0):0,distance:0,timer:null,autoScroll:b?(b.autoScroll?true:false):false,infinite:b?(b.infinite?true:false):false};var c={init:function(){if(d.len>1){c.initUI();c.bindEvent();if(d.autoScroll){d.timer=setInterval(c.autoAnimate,3000)}}},initUI:function(){if(d.infinite){var h=e.firstItem.clone();var g=e.lastItem.clone();e.wrap.append(h);g.insertBefore(e.firstItem)}c.creatPage();e.item=f.find(".slider-item");d.count=e.item.length;d.distance=d.width/5;if(d.infinite){e.wrap.css("-webkit-transform","translate3d("+-d.width+"px,0,0)")}},creatPage:function(){var h='<div class="slider-page"><ul>';for(var g=0;g<d.len;g++){if(g==0){h+='<li class="active"></li>'}else{h+="<li></li>"}}h+="</ul></div>";f.append(h);e.pagelist=f.find(".slider-page");e.pageItem=e.pagelist.find("li")},bindEvent:function(){f.off().on({touchstart:function(g){g.stopPropagation();clearInterval(d.timer);d.startX=g.touches?g.touches[0].pageX:g.originalEvent.touches[0].pageX;d.startY=g.touches?g.touches[0].pageY:g.originalEvent.touches[0].pageY},touchmove:function(l){l.stopPropagation();l.preventDefault();var i=l.touches?l.touches[0].pageX:l.originalEvent.touches[0].pageX;var h=l.touches?l.touches[0].pageY:l.originalEvent.touches[0].pageY;var k=i-d.startX;var j=h-d.startY;if(Math.abs(j)>Math.abs(k)){window.event.returnValue=true}var g=-d.index*d.width+k;e.wrap.css("-webkit-transform","translate3d("+g+"px,0,0)")},touchend:function(i){i.stopPropagation();var g=i.changedTouches?i.changedTouches[0].pageX:i.originalEvent.changedTouches[0].pageX;var h=g-d.startX;if(Math.abs(h)>=d.distance){d.index=d.index-Math.abs(h)/h}if(d.index>=d.count-1){d.index=d.count-1}if(d.index<=0){d.index=0}c.animate();if(d.autoScroll){d.timer=setInterval(c.autoAnimate,3000)}},touchcancel:function(g){e.wrap.css("-webkit-transform","translate3d("+-d.index*d.width+"px,0,0)")},webkitTransitionEnd:function(h){h.stopPropagation();h.preventDefault();e.wrap.removeClass("transitionable");if(d.infinite){if(d.index<=0){d.index=d.count-2}if(d.index>=d.count-1){d.index=1}}var g=d.infinite?d.index-1:d.index;e.pageItem.removeClass("active");e.pageItem.eq(""+g+"").addClass("active");e.wrap.css("-webkit-transform","translate3d("+-d.index*d.width+"px,0,0)")}});a(window).on({resize:function(){c.adjustPos()},orientationchange:function(){c.adjustPos()}})},adjustPos:function(){d.width=e.wrap.width();d.distance=d.width/5;e.wrap.css("-webkit-transform","translate3d("+-d.index*d.width+"px,0,0)")},animate:function(){e.wrap.addClass("transitionable");e.wrap.css("-webkit-transform","translate3d("+-d.index*d.width+"px,0,0)")},autoAnimate:function(){if(d.width>0){d.index++;c.animate()}}};c.init()});return this}})})(window.jQuery||window.Zepto);